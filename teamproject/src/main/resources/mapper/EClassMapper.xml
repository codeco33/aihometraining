<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aihometraining.team.mapper.EClassMapper">
	
	 <resultMap type="EClassOpenApplyForm" id="EClassOpenApplyFormResultMap">
	
		<result column="eClassOpenAppleyCode" 			property="eClassOpenAppleyCode"/>
		<result column="eClassOpenApplyMemberEmail"		property="eClassOpenApplyMemberEmail"/>
		<result column="eClassOpenApplyName" 			property="eClassOpenApplyName"/>
		<result column="eClassOpenApplyCategorySamll" 	property="eClassOpenApplyCategorySamll"/>
		<result column="eClassOpenApplyPrice" 			property="eClassOpenApplyPrice"/>
		<result column="eClassIntroduceCode"			property="eClassIntroduceCode"/>
		<result column="eClassOpenApplyDate"			property="eClassOpenApplyDate"/>
		<result column="eClassOpenApplyApproveState"	property="eClassOpenApplyApproveState"/>
		
			<association property="member" javaType="Member">
				<id 	column="memberEmail" 			property="memberEmail"/>
				<result column="memberPw" 				property="memberPw"/>
				<result column="memberLevelCode" 		property="memberLevelCode"/>
				<result column="memberNewsAgree" 		property="memberNewsAgree"/>
				<result column="memberRegDate" 			property="memberRegDate"/>
				<result column="memberName" 			property="memberName"/>
				<result column="memberPhone"	 		property="memberPhone"/>
				<result column="memberNickname" 		property="memberNickname"/>
				<result column="memberBirthday" 		property="memberBirthday"/>
				<result column="memberGender" 			property="memberGender"/>
				<result column="memberRecommendEmail" 	property="memberRecommendEmail"/>
				<result column="memberFinalPoint" 		property="memberFinalPoint"/>
			</association>
			
			<association property="eClassCategorySmall" javaType="EClassCategorySmall">
				<id 	column="eClassCategorySmallCode" 				property="eClassCategorySmallCode"/>
				<result column="eClassCategorySmallName" 				property="eClassCategorySmallName"/>
				<result column="eClassCategoryMediumCode" 				property="eClassCategoryMediumCode"/>
				<result column="eClassCategoryMediumName" 				property="eClassCategoryMediumName"/>
				<result column="eClassCategoryLargeCode" 				property="eClassCategoryLargeCode"/>
				<result column="eClassCategoryLargeName" 				property="eClassCategoryLargeName"/>
				<result column="memberEmail" 							property="memberEmail"/>
				<result column="eClassCategorySmallRegDate" 			property="eClassCategorySmallRegDate"/>
				<result column="updateMemberEmail" 						property="updateMemberEmail"/>
				<result column="eClassCategorySmallFinalUpdateDate" 	property="eClassCategorySmallFinalUpdateDate"/>
			</association>
			
			<association property="eClassIntroduce" javaType="EClassIntroduce">
				<id 	column="eClassIntroduceCode" 		property="eClassIntroduceCode"/>
				<result column="eClassApprovedCode" 		property="eClassApprovedCode"/>
				<result column="memberEmail" 				property="memberEmail"/>
				<result column="eClassIntroduceContent" 	property="eClassIntroduceContent"/>
				<result column="memberUpdateEmail" 			property="memberUpdateEmail"/>
				<result column="eClassIntroducetDate" 		property="eClassIntroducetDate"/>
				<result column="eClassIntroduceImg" 		property="eClassIntroduceImg"/>
			</association>
			
	</resultMap>
	
	<resultMap type="EClassCategorySmall" id="eClassCategorySmallResultMap">
	
		<result column="eClassCategorySmallCode" 			property="eClassCategorySmallCode"/>
		<result column="eClassCategorySmallName"			property="eClassCategorySmallName"/>
		<result column="eClassCategoryMediumCode" 			property="eClassCategoryMediumCode"/>
		<result column="eClassCategoryMediumName" 			property="eClassCategoryMediumName"/>
		<result column="eClassCategoryLargeCode" 			property="eClassCategoryLargeCode"/>
		<result column="eClassCategoryLargeName"			property="eClassCategoryLargeName"/>
		<result column="memberEmail"						property="memberEmail"/>
		<result column="eClassCategorySmallRegDate"			property="eClassCategorySmallRegDate"/>
		<result column="updateMemberEmail"					property="updateMemberEmail"/>
		<result column="eClassCategorySmallFinalUpdateDate"	property="eClassCategorySmallFinalUpdateDate"/>
		
	</resultMap>
	
	<resultMap type="EClassIntroduce" id="eClassIntroduceResultMap">
	
		<result column="eClassIntroduceCode" 		property="eClassIntroduceCode"/>
		<result column="memberEmail" 				property="memberEmail"/>
		<result column="eClassIntroduceContent" 	property="eClassIntroduceContent"/>
		<result column="memberUpdateEmail" 			property="memberUpdateEmail"/>
		<result column="eClassIntroducetDate"		property="eClassIntroducetDate"/>
		<result column="eClassIntroduceImg"			property="eClassIntroduceImg"/>
		
	</resultMap>
	
	<insert id="EClassIntroduceInsert" parameterType="EClassIntroduce">
	/* introduce 등록 처리 */
		INSERT INTO eclassintroduce (
			 eClassIntroduceCode
			, memberEmail
			, eClassIntroduceContent
			, memberUpdateEmail
			, eClassIntroducetDate
			, eClassIntroduceImg
		)VALUES (
			  #{eClassIntroduceCode}
			, #{memberEmail}
			, #{eClassIntroduceContent}
			, null
			, NOW()
			, NULL
		);
	</insert>
	
	<select id="eClassCategoryList" resultType="EClassCategorySmall">
		/* 카테고리 조회 */
		SELECT
			 cs.eClassCategorySmallCode
			,cs.eClassCategorySmallName
			,cs.eClassCategoryMediumCode
			,cs.eClassCategoryMediumName
			,cs.eClassCategoryLargeCode
			,cs.eClassCategoryLargeName
		FROM
			eclasscategorysmall AS cs;
	</select>
	
	<select id="eClassCategoryLarge" parameterType="String" resultMap="eClassCategorySmallResultMap">
		/* 운동클래스 카테고리 Medium 조회 */
		SELECT
			 cs.eClassCategoryMediumCode
			,cs.eClassCategoryMediumName
		FROM
			eclasscategorysmall AS cs 
		WHERE
			cs.eClassCategoryLargeCode = #{eClassCategoryLargeCode};
	</select>
	
	<select id="eClassCategoryMedium" parameterType="String" resultMap="eClassCategorySmallResultMap">
		/* 운동클래스 카테고리 small 조회 */
		SELECT
			 es.eClassCategorySmallCode
			,es.eClassCategorySmallName
		FROM
			 eclasscategorysmall AS es
		WHERE 	
			 es.eClassCategoryMediumCode = #{eClassCategoryMediumCode};
	</select>
</mapper>