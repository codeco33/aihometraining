<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aihometraining.team.mapper.EClassMapper">
	
	 	<resultMap type="eClassOpenApplyForm" id="EClassOpenApplyFormResultMap">
	
		<result column="eClassOpenAppleyCode" 			property="openAppleyCode"/>
		<result column="eClassOpenApplyMemberEmail"		property="memberEmail"/>
		<result column="eClassOpenApplyName" 			property="openApplyName"/>
		<result column="eClassOpenApplyCategorySamll" 	property="eClassCategorySmallCode"/>
		<result column="eClassOpenApplyPrice" 			property="openApplyPrice"/>
		<result column="eClassIntroduceCode"			property="introduceCode"/>
		<result column="eClassOpenApplyDate"			property="openApplyDate"/>
		<result column="eClassOpenApplyApproveState"	property="openApplyApproveState"/>
		
			<association property="member" javaType="Member">
				<id 	column="memberEmail" 			property="memberEmail"/>
				<result column="memberPw" 				property="memberPw"/>
				<result column="memberLevelCode" 		property="memberLevelCode"/>
				<result column="memberNewsAgree" 		property="memberNewsAgree"/>
				<result column="memberRegDate" 			property="memberRegDate"/>
				<result column="memberName" 			property="memberName"/>
				<result column="memberPhone"	 		property="memberPhone"/>
				<result column="memberNickname" 		property="memberNickname"/>
				<result column="memberBirthday" 		property="memberBirthday"/>
				<result column="memberGender" 			property="memberGender"/>
				<result column="memberRecommendEmail" 	property="memberRecommendEmail"/>
				<result column="memberFinalPoint" 		property="memberFinalPoint"/>
			</association>
			
			<association property="eClassCategorySmall" javaType="EClassCategorySmall">
				<id 	column="eClassCategorySmallCode" 				property="eClassCategorySmallCode"/>
				<result column="eClassCategorySmallName" 				property="eClassCategorySmallName"/>
				<result column="eClassCategoryMediumCode" 				property="eClassCategoryMediumCode"/>
				<result column="eClassCategoryMediumName" 				property="eClassCategoryMediumName"/>
				<result column="eClassCategoryLargeCode" 				property="eClassCategoryLargeCode"/>
				<result column="eClassCategoryLargeName" 				property="eClassCategoryLargeName"/>
				<result column="memberEmail" 							property="memberEmail"/>
				<result column="eClassCategorySmallRegDate" 			property="eClassCategorySmallRegDate"/>
				<result column="updateMemberEmail" 						property="updateMemberEmail"/>
				<result column="eClassCategorySmallFinalUpdateDate" 	property="eClassCategorySmallFinalUpdateDate"/>
			</association>
			
			<association property="eClassIntroduce" javaType="EClassIntroduce">
				<id 	column="eClassIntroduceCode" 		property="introduceCode"/>
				<result column="eClassApprovedCode" 		property="approvedCode"/>
				<result column="memberEmail" 				property="memberEmail"/>
				<result column="eClassIntroduceContent" 	property="introduceContent"/>
				<result column="memberUpdateEmail" 			property="updateEmail"/>
				<result column="eClassIntroducetDate" 		property="introducetDate"/>
				<result column="eClassIntroduceImg" 		property="introduceImg"/>
			</association>
			
	</resultMap>
	
	<insert id="eClassOpenApplyFormInsert" parameterType="eClassOpenApplyForm">
		/* 운동클래스 폼 등록 처리 */
		INSERT 
		INTO 
		eclassopenapply2(
		 	 eClassOpenApplyMemberEmail
			,eClassOpenApplyName
			,eClassOpenApplyCategorySamll
			,eClassOpenApplyPrice
			,eClassIntroduceCode
			,eClassOpenApplyDate
			,eClassOpenApplyApproveState
		)VALUE(
			  #{openAppleyCode}
			, #{memberEmail}
			, #{eClassCategorySmallCode}
			, #{openApplyPrice}
			, #{introduceCode}
			, CURDATE()
			, null
		);
	</insert>
</mapper>