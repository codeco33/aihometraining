<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/mypagedefault}">
<!-- 사용자 정의 title -->
<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
</th:block>
<!-- 사용자 정의 Css -->
<th:block layout:fragment="customCss">
	<link rel="stylesheet" type="text/css" th:href="@{/asset/css/plugins/simple-line-icons.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/asset/css/plugins/mediaelementplayer.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/asset/css/plugins/daterangepicker.css}" />
	<style type="text/css">
		.panel-heading > h4 {
			font-weight: bold;
			margin-top: 10px;
			margin-bottom: 0;
		}
		input[name="searchValue"] {
			height: 33px;
			width: 100%;
		}
		#searchPoint {
			margin-bottom: 10px;
		}
		#myPoint {
			margin-top: 0;
		}
		#myPointPanel {
			text-align: center;
		}
		.nav-tabs.nav-tabs-v2 {
			-webkit-box-shadow: none;
			box-shadow : none;
			padding-top: 0;
		}
		#pointCate {
			margin-top: 5px;
			z-index: 10000;
			border: none;
		}
		#pointCate li {
			padding: 0;
			border: none;
			text-align: center;
			margin-bottom: -1px;
		}
		#pointCate li a {
			color: #878787;
			font-size: 16px;
			font-weight: 400;
			border-radius: 0;
			padding: 10px 0;
			margin-right: 0;
			border: 1px solid #ddd;
			border-bottom: none;
		}
		#pointCate li:nth-child(2) a{
			border: none;
			border-top: 1px solid #ddd;
		}
		#pointCate>li.active>a {
			border: 1px solid #58666e;
			border-top: 2px solid #58666e;
			color: #555;
			font-weight: bold;
			border-radius: 0;
			border-bottom: none;
			background: #fbfbfb;
		}
		table.dataTable {
			margin-top: 0 !important;
		}
		.searchDate {
			padding: 5px 0;
		}
		.searchDate input[type="text"]{
			height: 33px;
			width: 120px;
		}
		.searchDate .fa-calendar {
			margin-left: 20px;
		}
		.searchDate button {
			margin-left: 20px;
		}
		.ranges {
			margin-top: 0 !important;
		}
		.ranges ul {
			width: 100% !important;
		}
		.ranges ul li {
			float:left;
		}
		.ranges .btn {
			padding: 6px;
		}
		#searchForm {
			padding: 30px 0;
			border-top: 1px solid #58666e;
			border-bottom: 1px solid #58666e;
			background: #fff;
			margin-bottom: 15px;
			background-color: #fbfbfb;
		}
		.panel-body {
			padding-top: 0;
		}
		.panel-heading {
			padding-bottom: 0;
		}
	</style>
</th:block>

<th:block layout:fragment="customContents">
	<div class="col-md-12">
		<div class="panel">
	        <div id="myPointPanel" class="panel-body">
	        	<h5>보유 포인트</h5>
	        	<h2 id="myPoint" class="text-info">6,000</h2>
	        </div>
		</div>
		<div class="panel">
			<!-- 패널 헤더 타이틀 -->
			<div class="panel-heading bg-white border-none">
	          <h4><span class="fa fa-money"></span> 포인트 조회</h4>
	        </div>
			<div class="panel-body">
				<ul id="pointCate" class="nav nav-tabs" role="tablist">
		            <li class="active col-xs-4 col-md-2">
		                <a href="#tab-table1" data-toggle="tab">전체</a>
		            </li>
		            <li class="col-xs-4 col-md-2">
		                <a href="#tab-table2" data-toggle="tab">증가</a>
		            </li>
		            <li class="col-xs-4 col-md-2">
		                <a href="#tab-table2" data-toggle="tab">감소</a>
		            </li>
	            </ul>
				<form id="searchForm" class="form-inline">
					<div class="form-group searchDate ">
						<span class="fa fa-calendar"></span>
						<input type="text" class="startDate" name="datefilter" value="" />
						 - 
						<input type="text" class="endDate" name="datefilter" value="" />
					</div>
					<div class="form-group">
						<button type="button" class="btn btn-gradient btn-primary">조회</button>
					</div>
				</form>
				<!-- 데이터 테이블 --> 
				<div class="responsive-table">				
					<table id="pointList" class="table table-striped table-bordered">
						<thead>
							<tr>
								<th>날짜</th>
								<th>내용</th>
								<th>증가/감소</th>
								<th>포인트</th>
								<th>포인트 잔액</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>2022-01-23</td>
								<td>운동일지 1주일 작성</td>
								<td><span class="label label-outline label-success">증가</span></td>
								<td>+50</td>
								<td>50</td>
							</tr>
							<tr>
								<td>2022-02-23</td>
								<td>운동 클래스 결제</td>
								<td><span class="label label-outline label-danger">감소</span></td>
								<td>-30</td>
								<td>20</td>
							</tr>
							<tr>
								<td>2022-03-23</td>
								<td>운동 클래스 결제</td>
								<td><span class="label label-outline label-danger">감소</span></td>
								<td>-20</td>
								<td>0</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>



</th:block>

<th:block layout:fragment="customBodyScript">

	<!-- plugins -->
	<script th:src="@{/asset/js/plugins/moment.min.js}"></script>
	<script th:src="@{/asset/js/plugins/jquery.dataTables.min.js}"></script>
	<script th:src="@{/asset/js/plugins/dataTables.bootstrap.min.js}"></script>
	<script th:src="@{/asset/js/plugins/jquery.nicescroll.js}"></script>

	<!-- custom -->
	<script th:src="@{/asset/js/main.js}"></script>
	<script th:src="@{/asset/js/plugins/daterangepicker.min.js}"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			var startDate = moment().subtract(6, 'month');
			var endDate = moment();
			
			 $('.startDate').val(startDate.format('YYYY/MM/DD'));
		     $('.endDate').val(endDate.format('YYYY/MM/DD'));
		     
			$('.searchDate ').daterangepicker(
					{
						autoUpdateInput : false,
						locale: {
				            cancelLabel: '취소',
				            applyLabel : '완료',
					        daysOfWeek: ["일", "월", "화", "수", "목", "금", "토"],
					        monthNames: ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
				        },
				        maxDate: endDate,
				        minDate: moment().subtract(36, 'month'),
				        startDate: startDate,
				        endDate: endDate,
				        format: 'YYYY/MM/DD',
				        ranges: {
				            '오늘': [moment(), moment()],
				            '1주일': [moment().subtract(6, 'days'), moment()],
				            '1개월': [moment().subtract(1, 'month'), moment()],
				            '3개월': [moment().subtract(3, 'month'), moment()],
				            '6개월': [moment().subtract(6, 'month'), moment()]
				        },
				         "alwaysShowCalendars": true,
				         "showCustomRangeLabel": false,
				         
				    });
			
			 $('.ranges').prependTo('#searchForm');
			 $('.ranges li').addClass("btn btn-default");
			 $('.ranges li:eq(4)').addClass("active");

			/*적용버튼*/
			$('.searchDate').on('apply.daterangepicker',function(ev, picker) {
				$('.startDate').val(
						picker.startDate.format('YYYY/MM/DD'));
				$('.endDate').val(
						picker.endDate.format('YYYY/MM/DD'));
			});
		
			$('span.drp-selected').remove();
			
			/*ranges 버튼에 active 처리*/
			$('.ranges li').click(function(){
				$('.ranges li').removeClass('active');
				$(this).addClass('active');
			});
			 
			/* 데이터 테이블 생성*/
			var table = $('#pointList').DataTable({
				order : [ 0, 'desc' ],
				lengthChange : false,
				pageLength : 15,
				filter: false,
			});
			
		});
	</script>
</th:block>
</html>