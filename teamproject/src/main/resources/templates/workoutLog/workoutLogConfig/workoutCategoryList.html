<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default}">
	<!-- 사용자 정의 title -->
	<th:block layout:fragment="customTitle">
		<title th:text="${title}"></title>
	</th:block>
	
	<th:block layout:fragment="customContents">
		<div class="col-md-12">
			<div class="panel">
		    	<div class="panel-heading bg-white border-none">
		        	<h4><span class="icon-direction"></span> 운동 계획 카테고리 목록</h4>
		        </div>
				<div class="panel-body">
					<div class="responsive-table">
	                    <table id="workoutCategory" class="table table-striped table-bordered" width="100%" cellspacing="0">
		                    <thead>
								<tr>
			                        <th>운동 계획 카테고리명</th>
			                        <th>수정</th>
			                        <th>삭제</th>
		                     	</tr>
		                    </thead>
		                    <tbody>
		                    	<tr th:if="${not #lists.isEmpty(workoutLogCategoryList)}" th:each="l : ${workoutLogCategoryList}">
			                        <td th:text="${l.workoutGoalPlanCategoryContent}"></td>
			                        <td>
			                        	<button type="button" id="btn1" class="btn btn-outline btn-success btn-sm" data-toggle="modal" data-target="#categoryUpdate">
											  	수정
										</button>
			                        </td>
			                        <td>
			                        	<a th:href="@{/workoutLog/workoutLogConfig/workoutCategoryDelete}"> 삭제 </a>
			                        </td>
		                      	</tr>
		                      	<tr th:unless="${not #lists.isEmpty(workoutLogCategoryList)}">
									<td colspan="3">등록된 회원의 정보가 없습니다.</td>
								</tr>
		                    </tbody>
	                  	</table>
	                </div>
		            <div style="text-align: center;">
		            	<a th:href="@{/workoutLog/workoutLogConfig/workoutCategoryInsert}" class="btn btn-outline btn-info btn-sm">카테고리 등록</a>
		            </div>
	            </div>
			</div>
		</div>
		
		<!-- 모달-수정 -->
		<div class="modal fade" id="categoryUpdate">
	        <div class="modal-dialog">
	          <div class="modal-content">
	            <div class="modal-header">
	              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	              <h4 class="modal-title"><span class="icon-direction"></span>운동 계획 카테고리명 수정</h4>
	            </div>
	            <div class="modal-body">
	              <form class="cmxform" id="workoutCategoryForm">
						<div class="col-md-12">
							<div class="form-group form-animate-text" style="margin-top:40px !important;">
								<input type="text" class="form-text" id="validate_workoutGoalPlanCategoryContent" name="workoutGoalPlanCategoryContent" required>
								<span class="bar"></span>
								<label>운동 계획 카테고리명</label>
							</div>
		 				</div>
				  </form>
				 </div> 
	            <div class="modal-footer">
	              <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
	              <button type="button" class="btn btn-primary" data-dismiss="modal">저장</button>
	            </div>
	          </div>
	        </div>
	    </div>
	
	</th:block>
	
	
			
	<!-- 사용자 정의 Css -->
	<th:block layout:fragment="customCss">
		<link rel="stylesheet" type="text/css" th:href="@{/asset/css/plugins/simple-line-icons.css}" />
	
		<style type="text/css">
			.panel-heading > h4 {
				font-weight: bold;
				margin-bottom: 0;
				border-bottom: 2px solid #58666e;
				padding-bottom: 5px;
			}
			 .panel-body:nth-child(2) {
				padding-top: 0;
			}
			.modal-body {
			    padding: 0px !important; 
			}
			#btn1 {width: 20%;}
		</style>
	</th:block>
	
	<!-- start: Javascript -->
	<th:block layout:fragment="customBodyScript">	
		<!-- start: Javascript -->
		<script src="asset/js/jquery.min.js"></script>
		<script src="asset/js/jquery.ui.min.js"></script>
		<script src="asset/js/bootstrap.min.js"></script>
	
		<!-- plugins -->
		<script th:src="@{/asset/js/plugins/moment.min.js}"></script>
		<script th:src="@{/asset/js/plugins/jquery.dataTables.min.js}"></script>
		<script th:src="@{/asset/js/plugins/dataTables.bootstrap.min.js}"></script>
		<script th:src="@{/asset/js/plugins/jquery.nicescroll.js}"></script>
		<script th:src="@{/asset/js/plugins/nouislider.min.js}"></script>
		<script th:src="@{/asset/js/plugins/jquery.validate.min.js}"></script>
		
		
		<!-- custom -->
		<script th:src="@{/asset/js/main.js}"></script>
		<script type="text/javascript">
		
			/* 데이터테이블 */
		  $(document).ready(function(){
		    $('#workoutCategory').DataTable();
		  });
		  
			/* 모달 */
		  $(document).ready(function() {
			    // Set iframe attributes when the show instance method is called
			    $("#categoryUpdate").on("show.bs.modal", function(event) {
			        let button = $(event.relatedTarget); // Button that triggered the modal
			    });

			    // Remove iframe attributes when the modal has finished being hidden from the user
			    $("#categoryUpdate").on("hidden.bs.modal", function() {
			        $("#categoryUpdate").removeAttr('.close');
			    });
			});
		  
			/* 카테고리폼 */
		  $(document).ready(function(){
			  
			    $("#workoutCategoryForm").validate({
			      errorElement: "em",
			      errorPlacement: function(error, element) {
			        $(element.parent("div").addClass("form-animate-error"));
			        error.appendTo(element.parent("div"));
			      },
			      success: function(label) {
			        $(label.parent("div").removeClass("form-animate-error"));
			      },
			      rules: {
			    	validate_workoutGoalPlanCategoryContent: "required",
			      },
			      messages: {
			    	validate_workoutGoalPlanCategoryContent: "카테고리 이름을 입력해주세요.",
			      }
			    });
			
			  });
			
		</script>
		
	</th:block>
	<!-- end: Javascript -->
</html>