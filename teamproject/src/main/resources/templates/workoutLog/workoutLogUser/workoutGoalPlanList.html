<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/userdefault}">
	<!-- 사용자 정의 title -->
	<th:block layout:fragment="customTitle">
		<title th:text="${title}"></title>
	</th:block>
	
	<th:block layout:fragment="customContents">
		<body>
  			<div id='wrap'>

			    <div id='external-events'>
			    	<h4>나의 운동 계획</h4>
			
			    	<div id='external-events-list'>
				        <div class='fc-event'>[[${title}]]</div>
				        <div class='fc-event'>하루 요가 섹션 2</div>
				        <div class='fc-event'>하루 요가 섹션 3</div>
				        <div class='fc-event'>하루 요가 섹션 4</div>
				        <div class='fc-event'>하루 요가 섹션 5</div>
			      	</div>
			
					<p>
			       		<input type='checkbox' id='drop-remove' />
			        	<label for='drop-remove'>remove after drop</label>
			      	</p>
			    </div>
		
		    	<div id='calendar'></div>
		
		    	<div style='clear:both'></div>
		
		  </div>
		</body>
		
	</th:block>
	
	<!-- 사용자 정의 Css -->
	<th:block layout:fragment="customCss">
		<style>
		/* <-- daygrid-views start --> */
		  body {
		    margin: 40px 10px;
		    padding: 0;
		    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
		    font-size: 14px;
		  }
		  #calendar {
		    max-width: 900px;
		    margin: 0 auto;
		  }
		/* <-- daygrid-views End --> */  
		
		/* <-- external-dragging-builtin Start --> */
		  body {
		    margin-top: 40px;
		    font-size: 14px;
		    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
		  }
		
		  #wrap {
		    width: 1100px;
		    margin: 0 auto;
		  }
		
		  #external-events {
		    float: left;
		    width: 150px;
		    padding: 0 10px;
		    border: 1px solid #ccc;
		    background: #eee;
		    text-align: left;
		  }
		
		  #external-events h4 {
		    font-size: 16px;
		    margin-top: 0;
		    padding-top: 1em;
		  }
		
		  #external-events .fc-event {
		    margin: 10px 0;
		    cursor: pointer;
		  }
		
		  #external-events p {
		    margin: 1.5em 0;
		    font-size: 11px;
		    color: #666;
		  }
		
		  #external-events p input {
		    margin: 0;
		    vertical-align: middle;
		  }
		
		  #calendar {
		    float: right;
		    width: 900px;
		  }
		/* <-- external-dragging-builtin End --> */
		
		  
		</style>
		
	</th:block>
	
	<!-- 사용자 정의 Script -->
	<th:block layout:fragment="customScript">
		<link th:href="@{/fullcalendar/packages/core/main.css}" rel='stylesheet' />
		<link th:href="@{/fullcalendar/packages/daygrid/main.css}" rel='stylesheet' />
		<link th:href="@{/fullcalendar/packages/timegrid/main.css}" rel='stylesheet' />
		<link th:href="@{/fullcalendar/packages/list/main.css}" rel='stylesheet' />
		
		<script th:src="@{/fullcalendar/packages/core/main.js}"></script>
		<script th:src="@{/fullcalendar/packages/interaction/main.js}"></script>
		<script th:src="@{/fullcalendar/packages/daygrid/main.js}"></script>
		<script th:src="@{/fullcalendar/packages/timegrid/main.js}"></script>
		<script th:src="@{/fullcalendar/packages/list/main.js}"></script>
		
		<script>
		  document.addEventListener('DOMContentLoaded', function() {
			  var Calendar = FullCalendar.Calendar;
			    var Draggable = FullCalendarInteraction.Draggable

			    /* initialize the external events
			    -----------------------------------------------------------------*/

			    var containerEl = document.getElementById('external-events-list');
			    new Draggable(containerEl, {
			      itemSelector: '.fc-event',
			      eventData: function(eventEl) {
			        return {
			          title: eventEl.innerText.trim()
			        }
			      }
			    });

			    //// the individual way to do it
			    // var containerEl = document.getElementById('external-events-list');
			    // var eventEls = Array.prototype.slice.call(
			    //   containerEl.querySelectorAll('.fc-event')
			    // );
			    // eventEls.forEach(function(eventEl) {
			    //   new Draggable(eventEl, {
			    //     eventData: {
			    //       title: eventEl.innerText.trim(),
			    //     }
			    //   });
			    // });

			    /* initialize the calendar
			    -----------------------------------------------------------------*/
		    var calendarEl = document.getElementById('calendar');
		
		    var calendar = new FullCalendar.Calendar(calendarEl, {
		      plugins: [ 'interaction', 'dayGrid', 'timeGrid', 'list' ],
		      header: {
		        left: 'prevYear,prev,next,nextYear today',
		        center: 'title',
		        right: 'dayGridMonth,dayGridWeek,timeGridDay,listWeek'
		      },
		      views: {
		          listDay: { buttonText: 'list day' },
		          listWeek: { buttonText: 'list week' }
		      },

		      defaultView: 'dayGridMonth',
		      defaultDate: '2022-03-22',
		      navLinks: true, // can click day/week names to navigate views
		      businessHours: true, // display business hours
		      selectable: true,
		      selectMirror: true,
		      select: function(arg) {
		        var title = prompt('Event Title:');
		        if (title) {
		          calendar.addEvent({
		            title: title,
		            start: arg.start,
		            end: arg.end,
		            allDay: arg.allDay
		          })
		        }
		        calendar.unselect()
		      },
		      editable: true,
		      droppable: true, // this allows things to be dropped onto the calendar
		      drop: function(arg) {
		        // is the "remove after drop" checkbox checked?
		        if (document.getElementById('drop-remove').checked) {
		          // if so, remove the element from the "Draggable Events" list
		          arg.draggedEl.parentNode.removeChild(arg.draggedEl);
		        }
		      },
		      eventLimit: true, // allow "more" link when too many events
		      events: [
		        {
		          title: '삼일절',
		          start: '2022-03-01'
		        },
		        {
		          title: '2kg 감량하기',
		          start: '2022-03-01',
		          end: '2022-03-31'
		        },
		        {
		          groupId: 999,
		          title: '화면 구현 끝내기',
		          start: '2022-03-026T16:00:00'
		        },
		        {
		          groupId: 999,
		          title: '프로젝트 끝내기',
		          start: '2022-04-14T16:00:00'
		        },
		        {
		          title: '만두 생일',
		          start: '2022-03-16',
		          end: '2022-03-16'
		        },
		        {
		          title: '줌 수업',
		          start: '2022-03-22T09:00:00',
		          end: '2022-03-22T17:30:00'
		        },
		        {
		          title: '점심',
		          start: '2022-03-12T12:00:00'
		        },
		        {
		          title: 'Dinner',
		          start: '2022-03-12T20:00:00'
		        }
		      ]
		    });
		  
		    calendar.render();
		  });
		</script>
		
	</th:block>
	
</html>